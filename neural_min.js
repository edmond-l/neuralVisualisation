let a,bgIMG,anchorX,anchorY,hover_on,hover_off,pulse,neuroidCount=15,neuroidArr=[],pointXs=[],pointYs=[],points=[],brainScaleFactor=1.4,starX=[],starY=[],starFill=[],starSize=[],starPhase=[],starCount=250;function preload(){hover_on=loadSound("assets/hover_on.mp3"),hover_off=loadSound("assets/hover_off.mp3"),pulse=loadSound("assets/pulse.mp3")}function setup(){for(getAudioContext().resume(),"running"!==getAudioContext().state&&getAudioContext().resume(),createCanvas(windowWidth,windowHeight),frameRate(30),a=new Neuroid(width/3,height/3,30),offsetX=-7,offsetY=17,anchorX=width/2+offsetX,anchorY=height/2+offsetY,defineBrainPoints(anchorX,anchorY,brainScaleFactor),i=0;i<pointXs.length;i++)points.push([pointXs[i],pointYs[i]]);for(i=0;i<points.length;i++)neuroidArr.push(new Neuroid(points[i][0],points[i][1],10));let s=[[0,[24,25,26,27,28]],[1,[2,17]],[2,[3,17,18]],[3,[4,18,19]],[4,[5,19]],[5,[6,19,20,27]],[6,[7,20,21]],[7,[8,21,22]],[8,[9,22,23]],[9,[10,12,23]],[10,[11,12,23]],[11,[12,13,14,22,23,24]],[12,[13]],[13,[14]],[14,[15,24]],[15,[16,24,25]],[16,[17,25]],[17,[18,25,26]],[18,[19,26]],[19,[18,26,27]],[20,[21,27]],[21,[22,27,28]],[22,[24,28]],[23,[22]],[24,[25,28]],[25,[26]],[26,[27]],[27,[28]]];for(i=0;i<s.length;i++)for(j=0;j<s[i][1].length;j++)neuroidArr[s[i][0]].connectStatic(neuroidArr[s[i][1][j]]);for(i=0;i<starCount;i+=1)starX.push(random(0,width)),starY.push(random(0,height)),push(),colorMode(HSB),starFill.push(random([color(191,94,85),color(45,65,92),color(304,61,69),color(201,40,120)])),pop(),starSize.push(2*randomGaussian(1,.5)),starPhase.push(random(0,PI))}function mousePressed(){}function mouseMoved(){"running"!==getAudioContext().state&&getAudioContext().resume()}function draw(){for(push(),colorMode(HSB),background(0,0,10),pop(),i=0;i<starX.length;i+=1)push(),fill(starFill[i]),noStroke(),ellipse(starX[i]+10*sin(5e-4*millis()+starPhase[i]),starY[i]+10*sin(5e-4*millis()+1/starPhase[i]),starSize[i]+.5*sin(.001*millis()+starPhase[i]),starSize[i]+.5*sin(.001*millis()+starPhase[i])),pop();for(textSize(20),frameCount%20==0&&(c=random(neuroidArr),c.colorFill=200),i=0;i<neuroidArr.length;i++);for(a.drawConnection(),i=0;i<neuroidArr.length;i++)neuroidArr[i].drawConnection(0,20*sin(25e-5*millis()));for(i=0;i<neuroidArr.length;i++)neuroidArr[i].drawNeuron()}function windowResized(){resizeCanvas(windowWidth,windowHeight),redraw()}function sort2DimensionArray(i,s){return i[0]===s[0]?0:i[0]<s[0]?-1:1}function Neuroid(i,s,t){this.xOriginal=i,this.yOriginal=s,this.x=this.xOriginal,this.y=this.yOriginal,this.sizeOriginal=t*brainScaleFactor,this.mouseFactor=1,this.colorFill=color(194,60,70),this.ringRadiusOriginal=this.sizeOriginal,this.ringRadius=0,this.boolFillDifferent=!1,this.scaleFactor=1,this.scaleFactorExpected=1.8,this.mousePressed=!1,this.ringRadiusTransion=!1,this.vibrate=!1,this.vibrateTimeSet=10,this.vibrateTime=0,this.vibrateFactor=1,this.neuralLineCount=5,this.hueOriginal=191,this.hue=this.hueOriginal,this.randomPhase=random(0,PI),this.randomPhaseX=random(0,2*PI),this.randomPhaseY=random(0,2*PI),this.size=this.sizeOriginal*this.mouseFactor,this.sizeZoom=1.8*this.sizeOriginal,this.neuralWalker=!0,this.walkerX=0,this.walkerY=0,this.connectedNeurons=[],this.connectionLimit=3,this.firstConnect=!0,this.playPulse=!1,this.pulsePlayerCountdown=5,this.pulsePlayerCount=5,this.playHoverOn=!1,this.hoverOnPlayerCountdown=5,this.hoverOnPlayerCount=5,this.hoverOnPlayed=!1,this.playHoverOn=!1,this.hoverOnPlayerCountdown=5,this.hoverOnPlayerCount=5,this.hoverOffPlayed=!0,push(),colorMode(HSB),this.colorReleased=color(198,54,85),pop(),this.drawAll=function(){this.drawConnection(),this.drawNeuron()},this.drawConnection=function(i,s){if(this.neuralWalker?(this.walkerX=3*sin(.001*millis()+this.randomPhaseX),this.walkerY=3*sin(.001*millis()+this.randomPhaseY)):(this.walkerX=0,this.walkerY=0),this.x=this.xOriginal+this.walkerX+i,this.y=this.yOriginal+this.walkerY+s,null!=this.connectedNeurons&&null!=this.connectedNeurons&&0!=this.connectedNeurons.length)for(this.v=0;this.v<this.connectedNeurons.length;this.v++)this.neuroidConnection(this.x,this.y,this.connectedNeurons[this.v].x,this.connectedNeurons[this.v].y)},this.drawNeuron=function(i,s){push(),colorMode(HSB),this.colorReleased=color(210+5*sin(.001*millis()+this.randomPhase),54,95+20*sin(5e-4*millis()+this.randomPhase)),pop(),push(),push(),colorMode(HSB),translate(this.x,this.y),this.checkMousePress(),this.vibrate?(this.vibrateFactor=random(.9,1.1),this.hue=this.hueOriginal+random(-15,15),this.vibrateTime-=1,this.vibrateTime<1&&(this.vibrate=!1)):(this.vibrateFactor=1,this.hue=this.hueOriginal),this.size=this.sizeOriginal*this.mouseFactor*this.scaleFactor*this.vibrateFactor,this.ringRadiusFinal=this.ringRadius*this.mouseFactor*this.vibrateFactor,this.ringStrokeWeightFinal=2*this.scaleFactor,this.boolFillDifferent?(this.hoverOnPlayed||(hover_on.play(),this.hoverOnPlayed=!0,this.hoverOffPlayed=!1),this.colorFill=color(this.hue,80,204),this.size<3*this.sizeOriginal&&(this.scaleFactor+=.1*(this.scaleFactorExpected-this.scaleFactor),this.size>3*this.sizeOriginal&&(this.scaleFactor=this.scaleFactorExpected)),this.ringRadius<1.2*this.size&&(this.ringRadius+=.2*(1.2*this.size-this.ringRadiusOriginal),this.ringRadius>1.2*this.size&&(this.ringRadius=1.2*this.size))):(this.hoverOnPlayed=!1,this.colorFill=this.colorReleased,this.hoverOffPlayed||(hover_off.play(),this.hoverOffPlayed=!0,this.pulsePlayerCountdown=this.pulsePlayerCount),this.size>this.sizeOriginal*this.mouseFactor&&(this.scaleFactor-=.1*(this.scaleFactor-1),this.size<this.sizeOriginal*this.mouseFactor&&(this.scaleFactor=1,this.size=this.sizeOriginal*this.mouseFactor)),this.ringRadiusTransion&this.ringRadius>1.2*this.ringRadiusOriginal&&(this.ringRadius-=.2*(this.ringRadius-this.ringRadiusOriginal),this.ringRadius<1.2*this.ringRadiusOriginal&&(this.ringRadiusTransion=!1)),this.ringRadiusTransion||(this.ringRadius=.18*this.ringRadiusOriginal*(sin(.001*millis()+this.randomPhase)+6.5))),this.mousePressed?(this.vibrate=!0,this.vibrateTime=this.vibrateTimeSet,this.mouseFactor=.75,this.playPulse&&this.pulsePlayerCountdown==this.pulsePlayerCount&&(pulse.play(),this.playPulse=!1),this.pulsePlayerCountdown>0?this.pulsePlayerCountdown-=2:this.pulsePlayerCountdown=this.pulsePlayerCount):(this.mouseFactor=1,this.vibrateFactor=1),push(),noFill(),stroke(194,60,70),strokeWeight(this.ringStrokeWeightFinal),ellipse(0,0,this.ringRadiusFinal,this.ringRadiusFinal),pop(),noStroke(),fill(this.colorFill),ellipse(0,0,this.size,this.size),pop(),pop()},this.checkMousePress=function(){abs(mouseX-this.x)<this.size/2&&abs(mouseY-this.y)<this.size/2?(this.boolFillDifferent=!0,mouseIsPressed?(this.mousePressed=!0,this.playPulse=!0):mouseIsPressed||(this.mousePressed=!1,this.playPulse=!1)):this.boolFillDifferent=!1},this.connects=function(i){let s=i.x,t=i.y;push(),stroke(50,120,200),strokeWeight(2),this.neuroidConnection(this.x,this.y,s,t),pop()},this.connectSpecial=function(i){let s=[[]],t=[];for(this.i=0;this.i<i.length;this.i++){let t=[];t.push(dist(this.x,this.y,i[this.i].x,i[this.i].y),this.i),s[this.i]=t}for(s.sort(sort2DimensionArray),this.j=0;this.j<this.neuralLineCount;this.j++)t.push(i[s[this.j][1]]);for(this.k=0;this.k<t.length;this.k++)this.neuroidConnection(this.x,this.y,t[this.k].x,t[this.k].y)},this.connectStatic=function(i){null!=i&&null!=i&&(i.connectedNeurons.push(this),this.connectedNeurons.push(i))},this.neuroidConnection=function(i,s,t,o){push(),colorMode(HSB),stroke(191,54,65),strokeWeight(2),line(i,s,t,o),pop()}}function defineBrainPoints(i,s,t){pointXs.push(i),pointYs.push(s),pointXs.push(i-220*t),pointYs.push(s+18*t),pointXs.push(i-220*t),pointYs.push(s-63*t),pointXs.push(i-131*t),pointYs.push(s-162*t),pointXs.push(i-18*t),pointYs.push(s-189*t),pointXs.push(i+92*t),pointYs.push(s-169*t),pointXs.push(i+220*t),pointYs.push(s-87*t),pointXs.push(i+236*t),pointYs.push(s+16*t),pointXs.push(i+204*t),pointYs.push(s+86*t),pointXs.push(i+185*t),pointYs.push(s+134*t),pointXs.push(i+142*t),pointYs.push(s+143*t),pointXs.push(i+82*t),pointYs.push(s+123*t),pointXs.push(i+94*t),pointYs.push(s+196*t),pointXs.push(i+63*t),pointYs.push(s+188*t),pointXs.push(i+35*t),pointYs.push(s+134*t),pointXs.push(i-58*t),pointYs.push(s+100*t),pointXs.push(i-112*t),pointYs.push(s+91*t),pointXs.push(i-156*t),pointYs.push(s+48*t),pointXs.push(i-130*t),pointYs.push(s-98*t),pointXs.push(i-35*t),pointYs.push(s-143*t),pointXs.push(i+116*t),pointYs.push(s-107*t),pointXs.push(i+120*t),pointYs.push(s-35*t),pointXs.push(i+157*t),pointYs.push(s+50*t),pointXs.push(i+141*t),pointYs.push(s+106*t),pointXs.push(i+18*t),pointYs.push(s+54*t),pointXs.push(i-86*t),pointYs.push(s+55*t),pointXs.push(i-68*t),pointYs.push(s-69*t),pointXs.push(i+18*t),pointYs.push(s-91*t),pointXs.push(i+72*t),pointYs.push(s-10*t)}